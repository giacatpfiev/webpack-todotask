(function(e){function a(a){for(var o,i,s=a[0],d=a[1],c=a[2],u=0,g=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&g.push(r[i][0]),r[i]=0;for(o in d)Object.prototype.hasOwnProperty.call(d,o)&&(e[o]=d[o]);l&&l(a);while(g.length)g.shift()();return n.push.apply(n,c||[]),t()}function t(){for(var e,a=0;a<n.length;a++){for(var t=n[a],o=!0,s=1;s<t.length;s++){var d=t[s];0!==r[d]&&(o=!1)}o&&(n.splice(a--,1),e=i(i.s=t[0]))}return e}var o={},r={app:0},n=[];function i(a){if(o[a])return o[a].exports;var t=o[a]={i:a,l:!1,exports:{}};return e[a].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=o,i.d=function(e,a,t){i.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,a){if(1&a&&(e=i(e)),8&a)return e;if(4&a&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var o in e)i.d(t,o,function(a){return e[a]}.bind(null,o));return t},i.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(a,"a",a),a},i.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=a,s=s.slice();for(var c=0;c<s.length;c++)a(s[c]);var l=d;n.push([0,"chunk-vendors"]),t()})({0:function(e,a,t){e.exports=t("56d7")},"034f":function(e,a,t){"use strict";var o=t("85ec"),r=t.n(o);r.a},"059e":function(e,a,t){"use strict";var o=t("eb4d"),r=t.n(o);r.a},"0f77":function(e,a,t){},"17e8":function(e,a,t){e.exports=t.p+"img/9.bd8ee4fc.jpg"},"1c36":function(e,a,t){"use strict";var o=t("fd4a"),r=t.n(o);r.a},"1fef":function(e,a,t){e.exports=t.p+"img/8.8a4beced.jpg"},"220f":function(e,a,t){e.exports=t.p+"img/loading-gear-curving.5177402f.gif"},"36dd":function(e,a,t){e.exports=t.p+"img/11.d627280c.jpg"},"522a":function(e,a,t){e.exports=t.p+"img/5.8c4177e5.jpg"},5665:function(e,a,t){"use strict";var o=t("e9e0"),r=t.n(o);r.a},"56d7":function(e,a,t){"use strict";t.r(a);t("e260"),t("e6cf"),t("cca6"),t("a79d");var o=t("2b0e"),r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"app"}},[e.visible_nav?t("Nav"):e._e(),t("div",{staticClass:"app demo"},[t("router-view")],1)],1)},n=[],i={HOME:"/",SIGN_IN:"/sign-in",ABOUT:"/about",BOARD:"/board",NOT_FOUND:"/not-found"},s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("b-navbar",{staticStyle:{"background-color":"#f8f9fa"},attrs:{type:"light"}},[e._l(e.endpoints,(function(a){return t("b-navbar-nav",{key:a.url},[a.alwaysShow||e.logged_in==a.showOnLogin?t("b-nav-item",{attrs:{href:a.url}},[e._v(" "+e._s(a.name)+" ")]):e._e()],1)})),t("b-navbar-nav",{staticClass:"ml-auto"},[e.logged_in?t("b-button",{staticClass:"mb-2",attrs:{variant:"outline-secondary"},on:{click:e.logout}},[t("b-icon",{attrs:{icon:"power"}}),e._v(" Logout ")],1):e._e()],1)],2)],1)},d=[],c=(t("ac1f"),t("5319"),t("59ca")),l=t.n(c),u=(t("ea7b"),t("d4ec")),g=t("bee2"),p={JWT:"JWT",FIREBASE_JWT:"FIREBASE_JWT"},h=p,b=function(){function e(){Object(u["a"])(this,e)}return Object(g["a"])(e,[{key:"clearJwt",value:function(){localStorage.removeItem(h.JWT)}},{key:"getJwt",value:function(){return localStorage.getItem(h.JWT)}},{key:"setJwt",value:function(e,a){console.log("LocalStorage -> setJwt :: "+h.JWT+" -> "+e),localStorage.setItem(h.JWT,e),a&&a()}},{key:"setSocialJwt",value:function(e,a){console.log("LocalStorage -> setSocialJwt :: "+h.FIREBASE_JWT+" -> "+e),localStorage.setItem(h.FIREBASE_JWT,e),a&&a()}},{key:"getSocialJwt",value:function(){return localStorage.getItem(h.FIREBASE_JWT)}},{key:"clearSocialJwt",value:function(){localStorage.removeItem(h.FIREBASE_JWT)}}]),e}(),f=new b,v=f,m={name:"Nav",data:function(){return{endpoints:{HOME:{url:"/",name:"Home",showOnLogin:!0},ABOUT:{url:"/about",name:"About",alwaysShow:!0},SIGN_IN:{url:"/sign-in",name:"Sign-in",showOnLogin:!1}}}},methods:{logout:function(){var e=this;v.clearJwt();var a=this;l.a.auth().signOut().then((function(){e.$router.replace(a.endpoints.SIGN_IN.url)}))}},computed:{logged_in:function(){return null!=v.getJwt()}}},B=m,y=t("2877"),C=Object(y["a"])(B,s,d,!1,null,"9c52c1e2",null),S=C.exports,E={name:"App",components:{Nav:S},computed:{visible_nav:function(){return this.$route.path!==i.SIGN_IN&&this.$route.path!=i.NOT_FOUND}}},k=E,O=(t("034f"),Object(y["a"])(k,r,n,!1,null,null,null)),w=O.exports,I=(t("45fc"),t("8c4f")),_=function(){var e=this,a=e.$createElement,o=e._self._c||a;return o("div",{staticStyle:{width:"100%"}},[e.loading<2?o("div",{staticClass:"loading-background"},[o("img",{staticClass:"loading-item",attrs:{src:t("220f")}})]):e._e(),e.loading>=2?o("div",[o("b-container",[o("b-button",{staticStyle:{margin:"20px"},attrs:{variant:"light"},on:{click:function(a){e.showCreateBoardArea=!e.showCreateBoardArea}}},[e._v("Create bag")]),e.showCreateBoardArea?o("div",{staticClass:"create-bag-area"},[o("div",{staticClass:"create-bag-layer",on:{click:function(a){e.showCreateBoardArea=!1}}}),o("div",{staticClass:"create-bag-form"},[o("b-form-textarea",{attrs:{rows:"3","max-rows":"6",placeholder:"name"},model:{value:e.newBoardName,callback:function(a){e.newBoardName=a},expression:"newBoardName"}}),o("b-button",{staticClass:"btn-submit-edit-bag btn-save",staticStyle:{"margin-top":"15px"},attrs:{variant:"info"},on:{click:e.createBoard}},[e._v("Save")]),o("b-button",{staticClass:"btn-submit-edit-bag btn-save",staticStyle:{"margin-top":"15px","margin-left":"15px"},attrs:{variant:"danger"},on:{click:function(a){e.showCreateBoardArea=!1}}},[e._v("Cancel")])],1)]):e._e(),o("div",{staticClass:"portfolio-grid"},e._l(e.boards,(function(a){return o("figure",[o("a",{attrs:{href:"/board/"+a.id}},[o("img",{attrs:{src:t("dca8")("./"+(a.id%12+1)+".jpg"),alt:""}}),o("h5",{staticClass:"myh5"},[e._v(e._s(a.name))]),o("small",[e._v(e._s(a.id))]),o("div")])])})),0),e._l(12,(function(e){return o("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[o("img",{attrs:{src:t("dca8")("./"+(e%12+1)+".jpg"),alt:""}})])}))],2)],1):e._e()])},N=[],A=(t("13d5"),t("d81d"),t("b0c0"),t("bc3a")),D=t.n(A),x={AUTHEN_HEADER:"Authorization"},M={WS_URL:"wss://thaivan.xyz/ws/todotask/websocket",HTTP_URL:"https://thaivan.xyz/http/todotask"},U=M,H=function(){function e(){Object(u["a"])(this,e),this.httpServer=U.HTTP_URL}return Object(g["a"])(e,[{key:"get",value:function(e,a,t,o){var r=this.httpServer+e,n=v.getJwt();console.log("[GET]: "+r),n&&(a.defaults.headers.common[x.AUTHEN_HEADER]="Bearer "+n),a.get(r).then(t,o)}},{key:"post",value:function(e,a,t,o,r){var n=this.httpServer+e,i=v.getJwt();console.log("[POST]: "+n),i&&(t.defaults.headers.common[x.AUTHEN_HEADER]="Bearer "+i),t.post(n,a).then(o,r)}},{key:"put",value:function(e,a,t,o,r){var n=this.httpServer+e,i=v.getJwt();console.log("[PUT]: "+n),i&&(t.defaults.headers.common[x.AUTHEN_HEADER]="Bearer "+i),t.put(n,a).then(o,r)}},{key:"delete",value:function(e,a,t,o){var r=this.httpServer+e,n=v.getJwt();console.log("[DELETE]: "+r),n&&(a.defaults.headers.common[x.AUTHEN_HEADER]="Bearer "+n),a.delete(r).then(t,o)}}]),e}(),J=new H,R=J,T={BASIC_SIGN_IN:"/api/auth/basic-sign-in",BASIC_SIGN_UP:"/api/auth/basic-sign-up",SOCIAL_SIGN_IN:"/api/auth/social-sign-in",BOARD:"/api/private/board",BAG:"/api/private/bag",CARD:"/api/private/card"},j=function(){function e(){Object(u["a"])(this,e)}return Object(g["a"])(e,[{key:"mapToBoards",value:function(e){var a=this;return e.map((function(e){return a.mapToBoard(e)}))}},{key:"mapToBoard",value:function(e){return{id:e.id,name:e.name,role:e.role}}},{key:"createBoard",value:function(e,a,t){var o={boardName:e.boardName};D.a.create({}),R.post(T.BOARD,o,D.a,a,t)}},{key:"fetchBoards",value:function(e,a){D.a.create({}),R.get(T.BOARD,D.a,e,a)}}]),e}(),P=new j,W=P,L={OK:200,BAD_REQUEST:400},$={redirectToHomeFrom:function(e){this.redirect(e)},redirect:function(e,a){a=a||i.HOME,e.$router.replace(a)},reload:function(e){e.$router.go()}},G=t("7df6"),F=t.n(G),q=function(){function e(){Object(u["a"])(this,e)}return Object(g["a"])(e,[{key:"signOut",value:function(e){v.clearJwt(),$.redirect(e,i.SIGN_IN)}}]),e}(),z=new q,V=z,K=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"form",on:{click:function(a){e.toggle=!0,e.name=""}}},[t("div",{on:{click:function(e){e.stopPropagation()}}},[t("div",[e.toggle?t("div",{staticClass:"btn-create-header",on:{click:function(a){e.toggle=!1}}},[t("b-icon",{attrs:{icon:"plus","font-scale":"1"}}),e._v(" Add more ")],1):e._e()]),e.toggle?e._e():t("div",{staticClass:"create-group"},[t("b-form-textarea",{staticClass:"input-create-form",attrs:{rows:"3","max-rows":"6",placeholder:"name"},model:{value:e.componentName,callback:function(a){e.componentName=a},expression:"componentName"}}),t("b-button",{staticClass:"btn-creator btn-create-submit",attrs:{variant:"success"},on:{click:e.onCreate}},[e._v("Submit")]),t("b-button",{staticClass:"btn-creator btn-cancel-submit",attrs:{variant:"danger"},on:{click:function(a){e.toggle=!0,e.name=""}}},[e._v("Cancel")])],1)])])},Q=[],Y={name:"CreatorPopUp",props:{},data:function(){return{toggle:!0,componentName:""}},methods:{onCreate:function(){this.$emit("onSubmit",this.componentName),this.toggle=!0,this.componentName=""}}},X=Y,Z=(t("1c36"),Object(y["a"])(X,K,Q,!1,null,"1bfe5446",null)),ee=Z.exports,ae=(t("a434"),function e(){Object(u["a"])(this,e),this.ADD_MEMBER="add_member",this.LEAVE_BOARD="leave_board",this.UPDATE_BOARD="update_board",this.DELETE_BOARD="delete_board",this.CREATE_BAG="create_bag",this.MOVE_BAG="move_bag",this.DELETE_BAG="delete_bag",this.EDIT_BAG="edit_bag",this.CREATE_CARD="create_card",this.MOVE_CARD="move_card",this.DELETE_CARD="delete_card",this.EDIT_CARD="edit_card"}),te=new ae,oe=function(){function e(a){Object(u["a"])(this,e),this.page=a,this.buildHandler()}return Object(g["a"])(e,[{key:"buildHandler",value:function(){this.handlers={},this.handlers[te.LEAVE_BOARD]=this.receiveMessageLeaveBoard.bind(this),this.handlers[te.ADD_MEMBER]=this.receiveMessageAddMember.bind(this),this.handlers[te.DELETE_BOARD]=this.receiveMessageDeleteBoard.bind(this)}},{key:"onmessage",value:function(e){console.log("HomeWebsocketHandler -> onMessage ".concat(e.data));var a=JSON.parse(e.data);this.handlers[a.action]&&this.handlers[a.action](a),!this.handlers[a.action]&&this.commonMessageHandler(a)}},{key:"onclose",value:function(e){}},{key:"onerror",value:function(e){}},{key:"receiveMessageLeaveBoard",value:function(e){var a,t,o=e.message,r="Leave board "+e.boardId;if(this.page.currentUserId==o){a="You leave the board "+e.boardId,t="warning";for(var n=0;n<this.page.boards.length;n++)if(this.page.boards[n].id==e.boardId){this.page.boards.splice(n,1);break}}else a="UserId "+o+" leave the board "+e.boardId,t="info";this.onCreateNotification(r,a,t)}},{key:"receiveMessageDeleteBoard",value:function(e){for(var a=0;a<this.page.boards.length;a++)if(this.page.boards[a].id==e.boardId){this.page.boards.splice(a,1);break}var t="Delete board "+e.boardId,o="Board "+e.boardId+" is deleted!!",r="warning";this.onCreateNotification(t,o,r)}},{key:"receiveMessageAddMember",value:function(e){var a=e.message.id;if(a==this.page.currentUserId){var t=this.page.$createElement,o="You are added into boardId "+e.boardId,r=t("b-link",{props:{href:"/board/"+e.boardId}},"CLICK TO SEE");this.onCreateNotification(o,r)}else this.commonMessageHandler(e)}},{key:"commonMessageHandler",value:function(e){var a=e.action.toUpperCase()+" in boardId "+e.boardId,t=this.page.$createElement,o=t("b-link",{props:{href:"/board/"+e.boardId}},"CLICK TO SEE");this.onCreateNotification(a,o)}},{key:"onCreateNotification",value:function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info";console.log("homeWS -> onCreateNotification: "+e+" | "+a);var o=this.page.$createElement,r=o("div",[o("b-spinner",{props:{type:"grow",small:!0}}),a,o("b-spinner",{props:{type:"grow",small:!0}})]);this.page.$bvToast.toast([r],{variant:t,title:e,autoHideDelay:5e3,appendToast:!1})}}]),e}(),re=oe,ne=(t("99af"),function(){function e(a,t,o){Object(u["a"])(this,e),this.url=a,this.delegate=t,this.socket=null,this.jwt=o}return Object(g["a"])(e,[{key:"connect",value:function(){var e=this;this.socket=new WebSocket(this.url+"?jwt="+this.jwt);var a=this.socket;a.onopen=e.onopen.bind(e),a.onmessage=e.onmessage.bind(e),a.onclose=e.onclose.bind(e),a.onerror=e.onerror.bind(e)}},{key:"setJwt",value:function(e){this.jwt=e}},{key:"send",value:function(e){this.socket.send(e)}},{key:"onopen",value:function(e){console.log("[open] Connection established"),this.delegate.onopen&&this.delegate.onopen(e)}},{key:"onmessage",value:function(e){console.log("[message] Data received from server: ".concat(e.data)),this.delegate.onmessage&&this.delegate.onmessage(e)}},{key:"onclose",value:function(e){if(e.wasClean)return console.log("[close] Connection closed cleanly, code=".concat(e.code," reason=").concat(e.reason)),void(this.delegate.onclear&&this.delegate.onclear(e));console.log("[close] Connection died"),this.delegate.ondie&&this.delegate.ondie(e)}},{key:"onerror",value:function(e){console.log("[error] "+e.message),this.delegate.onerror&&this.delegate.onerror(e)}},{key:"close",value:function(){this.socket.close()}},{key:"getState",value:function(){var e=this.socket.readyState;switch(e){case 0:return"CONNECTING";case 1:return"OPEN";case 2:return"CLOSING";case 3:return"CLOSED";default:return"undefined"}}}]),e}()),ie=ne,se={name:"Home",components:{CreatorPopUp:ee,AutoResponsive:F.a},mounted:function(){this.fetchBoards(),this.connectWebsocket()},beforeDestroy:function(){this.homeWS.close()},data:function(){return{boards:[],showCreateBoardArea:!1,newBoardName:"",loading:0,currentUserId:null,homeWS:new ie(U.WS_URL,this),WSHandler:new re(this)}},computed:{boardGrids:function(){var e=3;return this.boards.sort((function(e,a){return a.id-e.id})),this.boards.reduce((function(a,t,o){return(o%e==0?a.push([t]):a[a.length-1].push(t))&&a}),[])}},methods:{connectWebsocket:function(){var e=v.getJwt();this.homeWS.setJwt(e),this.homeWS.connect()},createBoard:function(){this.showCreateBoardArea=!1;var e=this,a={boardName:e.newBoardName};e.newBoardName="",W.createBoard(a,(function(a){console.log("Home -> createBoard. "+JSON.stringify(a));var t=a.status;t==L.OK&&(console.log("Home -> createBoard. Success: "+JSON.stringify(a.data)),e.boards.unshift(a.data))}),(function(e){console.log("Home -> createBoard fail. "+JSON.stringify(e))}))},fetchBoards:function(){var e=this;W.fetchBoards((function(a){console.log("Home -> fetchBoards. "+JSON.stringify(a));var t=a.status;t==L.OK?(e.boards=W.mapToBoards(a.data.boards),e.currentUserId=a.data.userId,console.log("Home -> fetchBoards status success: "+JSON.stringify(e.boards)),e.loading+=1):console.log("Home -> fetchBoards status fail")}),(function(a){console.log("Home -> fetchBoards error. "+JSON.stringify(a.response)),401==a.response.status&&V.signOut(e)}))},onClickBag:function(e){$.redirect(this,i.BOARD+"/"+e)},onopen:function(e){this.loading+=1},onmessage:function(e){this.WSHandler.onmessage(e)},onclose:function(e){this.WSHandler.onclose(e)},onerror:function(e){this.WSHandler.onerror(e)}}},de=se,ce=(t("5665"),Object(y["a"])(de,_,N,!1,null,"05a46832",null)),le=ce.exports,ue=function(){var e=this,a=e.$createElement,o=e._self._c||a;return o("div",{staticClass:"container"},[e.loading?o("div",{staticClass:"loading-background"},[o("img",{staticClass:"loading-item",attrs:{src:t("220f")}})]):e._e(),e.loading?e._e():o("div",[o("div",{staticClass:"page-sign-in-background"}),e._m(0),o("div",{staticClass:"form-sign-in"},[o("div",{staticStyle:{cursor:"not-allowed"}},[o("div",{staticClass:"form-input"},[o("b-input",{staticStyle:{cursor:"not-allowed","margin-bottom":"20px"},attrs:{disabled:"",type:"email",placeholder:"email"},model:{value:e.email,callback:function(a){e.email=a},expression:"email"}}),o("b-input",{staticStyle:{cursor:"not-allowed"},attrs:{disabled:"",type:"password",placeholder:"password"}})],1),o("div",{staticClass:"form-btn"},[o("b-button",{staticStyle:{cursor:"no-drop"},attrs:{variant:"outline-secondary",disabled:""},on:{click:e.basicSignIn}},[e._v("Sign in")])],1)]),o("div",{staticClass:"form-social",staticStyle:{"text-align":"center"}},[o("img",{staticClass:"social-btn",staticStyle:{width:"42px",height:"42px"},attrs:{src:t("e9ca")},on:{click:function(a){return e.onSocialLogin("facebook")}}}),o("img",{staticClass:"social-btn",staticStyle:{width:"42px",height:"42px"},attrs:{src:t("8c54")},on:{click:function(a){return e.onSocialLogin("google")}}})])]),o("br")])])},ge=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"sign-in-background"},[t("div",{staticClass:"page-sign-in-icon"})])}],pe=(t("4160"),t("159b"),{facebook:{provider:l.a.auth.FacebookAuthProvider,scopes:["email"],icon:"@assets/facebook.svg"},google:{provider:l.a.auth.GoogleAuthProvider,scopes:["email","profile"],icon:"../assets/google.svg"}}),he=pe,be=function(){function e(){Object(u["a"])(this,e)}return Object(g["a"])(e,[{key:"basicSignIn",value:function(e,a,t){var o={email:e.email,password:e.password};D.a.create({}),R.post(T.BASIC_SIGN_IN,o,D.a,a,t)}},{key:"basicSignUp",value:function(e,a,t){var o={email:e.email,password:e.password,displayedName:e.displayedName};D.a.create({}),R.post(T.BASIC_SIGN_UP,o,D.a,a,t)}},{key:"socialLogin",value:function(e,a,t){var o={tokenId:e};D.a.create({}),R.post(T.SOCIAL_SIGN_IN,o,D.a,a,t)}}]),e}(),fe=new be,ve=fe,me={name:"SignIn",data:function(){return{email:"",password:"password",displayedName:"email",ProviderConfig:he,loading:!1}},methods:{basicSignIn:function(){var e=this,a={email:e.email,password:e.password};ve.basicSignIn(a,(function(a){console.log("basicSignIn success: "+JSON.stringify(a));var t=a.status;t==L.OK?e.onSuccess(a):e.onFail(a)}),(function(e){console.log("basicSignIn fail: "+JSON.stringify(e))}))},basicSignUp:function(){var e=this,a={email:e.email,password:e.password,displayedName:e.displayedName};ve.basicSignUp(a,(function(a){console.log(t+" basicSignUp success: "+JSON.stringify(a));var t=a.status;t==L.OK?e.onSuccess(a):e.onFail(a)}),(function(e){console.log("basicSignUp fail: "+JSON.stringify(e))}))},onSuccess:function(e){var a=e.data,t=a.jwt;v.setJwt(t,this.goToHome)},onFail:function(e){console.log(JSON.stringify(e))},onSocialLogin:function(e){var a=new he[e]["provider"],t=he[e]["scopes"];t.forEach((function(e){a.addScope(e)}));var o=this;l.a.auth().signInWithPopup(a).then((function(e){o.loading=!0,l.a.auth().currentUser.getIdToken(!0).then((function(e){console.log("token "+e),v.setSocialJwt(e,o.socialLoginToServer.bind(o,e))}))})).catch((function(e){alert("error "+e.message),o.loading=!1}))},socialLoginToServer:function(e){var a=this;ve.socialLogin(e,(function(e){console.log("socialLoginToServer SUCCESS "+JSON.stringify(e)),a.onSuccess(e)}),(function(e){console.log("socialLoginToServer ERROR "+JSON.stringify(e)),a.onFail(e)}))},goToHome:function(){$.redirectToHomeFrom(this)}}},Be=me,ye=(t("059e"),Object(y["a"])(Be,ue,ge,!1,null,"fedb2558",null)),Ce=ye.exports,Se=function(){var e=this,a=e.$createElement,o=e._self._c||a;return o("div",{staticClass:"container"},[o("br"),o("img",{staticStyle:{height:"30px",width:"auto","margin-right":"5px"},attrs:{src:t("7a61")}}),o("b-badge",{attrs:{variant:"success"}},[o("b-link",{staticStyle:{color:"white"},attrs:{target:"_blank",href:"https://github.com/giacatpfiev/todo-tasklist-vuejs"}},[e._v("front end")])],1),o("img",{staticStyle:{height:"30px",width:"auto","margin-right":"5px","margin-left":"20px"},attrs:{src:t("7a61")}}),o("b-badge",{attrs:{variant:"danger"}},[o("b-link",{staticStyle:{color:"white"},attrs:{target:"_blank",href:"https://github.com/giacatpfiev/todotask"}},[e._v("back end")])],1),o("div")],1)},Ee=[],ke={name:"About"},Oe=ke,we=Object(y["a"])(Oe,Se,Ee,!1,null,null,null),Ie=we.exports,_e=function(){var e=this,a=e.$createElement,o=e._self._c||a;return o("div",[e.loading<e.loadingItem?o("div",{staticClass:"loading-background"},[o("img",{staticClass:"loading-item",attrs:{src:t("220f")}})]):e._e(),e.loading>=e.loadingItem?o("div",{staticClass:"demo"},[o("div",{staticClass:"board-member"},[o("div",{staticStyle:{display:"inline"}},[o("b-avatar",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"board-sidebar",expression:"'board-sidebar'"}],staticClass:"mr-3",staticStyle:{cursor:"pointer"},attrs:{icon:"info-circle",variant:e.widget.sidebar_btn.variant},on:{mouseover:function(a){e.widget.sidebar_btn.variant="secondary"},mouseleave:function(a){e.widget.sidebar_btn.variant="outline-secondary"}}}),o("b-avatar",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"member-collapse",expression:"'member-collapse'"}],staticClass:"mr-3",staticStyle:{cursor:"pointer"},attrs:{icon:e.widget.members_btn.icon,variant:"secondary"},on:{mouseover:function(a){e.widget.members_btn.icon="people"},mouseleave:function(a){e.widget.members_btn.icon="people-fill"}}}),o("b-avatar",{staticClass:"mr-3",staticStyle:{cursor:"pointer"},attrs:{icon:e.widget.add_member_btn.icon,variant:"light",size:"2rem"},on:{click:function(a){e.showAddMemberInput=!e.showAddMemberInput},mouseover:function(a){e.widget.add_member_btn.icon="person-plus"},mouseleave:function(a){e.widget.add_member_btn.icon="person-plus-fill"}}}),o("transition",{attrs:{name:"add-member-input-transition"}},[o("input",{directives:[{name:"show",rawName:"v-show",value:e.showAddMemberInput,expression:"showAddMemberInput"},{name:"model",rawName:"v-model",value:e.addedEmail,expression:"addedEmail"}],staticStyle:{border:"5px",padding:"7px","background-color":"#eeeeee","border-radius":"5px"},attrs:{type:"email",placeholder:"Enter email..."},domProps:{value:e.addedEmail},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.addMemberByEmail(a)},input:function(a){a.target.composing||(e.addedEmail=a.target.value)}}})])],1),o("b-sidebar",{attrs:{id:"board-sidebar","backdrop-variant":"danger",backdrop:"true",shadow:""}},[o("div",[o("h3",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.boardName))]),o("img",{staticStyle:{width:"100%",height:"auto"},attrs:{src:t("dca8")("./"+(e.boardId%12+1)+".jpg")}}),o("div",{staticStyle:{margin:"5%"}},[o("b-badge",[e._v("Enter new board name")]),o("b-input",{staticStyle:{"margin-top":"1%",width:"90%"},attrs:{placeholder:"Enter new board name"},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.updateBoard(a)}},model:{value:e.newName,callback:function(a){e.newName=a},expression:"newName"}})],1),"MOD"==e.currentUser.boardRole?o("div",{staticStyle:{"margin-top":"10%"}},[o("b-icon",{staticStyle:{"margin-left":"10%",cursor:"pointer"},attrs:{icon:e.widget.sidebar_btn.delete_board_icon,scale:"4",variant:"danger"},on:{mouseover:function(a){e.widget.sidebar_btn.delete_board_icon="x-circle-fill"},mouseleave:function(a){e.widget.sidebar_btn.delete_board_icon="x-circle"},click:e.deleteBoard}}),o("b-badge",{staticStyle:{"margin-left":"8%"},attrs:{variant:"outline-danger"}},[e._v("Remove board")])],1):e._e()])]),o("b-collapse",{attrs:{id:"member-collapse"}},[o("b-list-group",{staticStyle:{width:"300px"}},e._l(e.members,(function(a){return o("b-list-group-item",{key:a.id,staticClass:"d-flex align-items-center"},[o("b-avatar",{staticClass:"mr-3",attrs:{src:a.avatarUrl}}),o("div",[o("b-badge",{attrs:{variant:"MOD"===a.boardRole?"warning":"secondary"}},[e._v(e._s(a.boardRole))]),o("span",{staticClass:"mr-auto",staticStyle:{"margin-left":"10px"}},[e._v(e._s(a.displayedName.length>10?a.displayedName.substr(0,10)+" ...":a.displayedName))]),"MEMBER"===a.boardRole&&"MOD"==e.currentUser.boardRole?o("b-icon",{staticStyle:{position:"absolute",right:"10px",cursor:"pointer"},attrs:{icon:"trash-fill"},on:{click:function(t){return e.removeMember(a.id)}}}):e._e()],1)],1)})),1)],1)],1),o("div",{staticClass:"card-scene"},[o("Container",{attrs:{orientation:"horizontal","drag-handle-selector":".column-drag-handle","drop-placeholder":e.upperDropPlaceholderOptions},on:{drop:function(a){return e.onColumnDrop(a)},"drag-start":e.dragStart}},[e._l(e.board.bags,(function(a,t){return o("Draggable",{key:a.id,ref:e.bagTagId(a.id),refInFor:!0},[o("div",[o("div",{staticClass:"card-container"},[o("div",{staticClass:"card-column-header column-drag-handle"},[o("b-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"ml-auto edit-column-icon",attrs:{title:"edit",variant:"transparent",icon:"pencil-square","font-scale":"2"},on:{click:function(o){return e.showEditBagPopUp(a.id,t,a.name)}}}),e._v(" "+e._s(a.name)+" ")],1),o("div",{staticStyle:{"max-height":"65vh","overflow-y":"auto"}},[o("Container",{attrs:{"group-name":"col","get-child-payload":e.getCardPayload(a.id),"drag-class":"card-ghost","drop-class":"card-ghost-drop","drop-placeholder":e.dropPlaceholderOptions},on:{drop:function(t){return e.onCardDrop(a.id,t)},"drag-start":function(a){return e.log("drag start",a)},"drag-end":function(a){return e.log("drag end",a)}}},e._l(a.cards,(function(a,r){return o("Draggable",{key:a.id,ref:e.cardTagId(a.id),refInFor:!0},[o("div",{staticClass:"card",style:e.makeColor(a.id)},[o("b-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"ml-auto edit-card-icon",attrs:{title:"edit",variant:"secondary",icon:"pencil-square","font-scale":"1.5"},on:{click:function(o){return e.showEditCardPopUp(a.id,r,t,a.name)}}}),o("p",[e._v(e._s(a.name))])],1)])})),1)],1)]),o("creator-pop-up",{on:{onSubmit:function(t){return e.createCard(t,a.id)}}})],1)])})),o("creator-pop-up",{on:{onSubmit:e.createBag}})],2)],1),e.getBagPopupData.show?o("bag-pop-up",{attrs:{data:e.getBagPopupData},on:{onSave:e.editBagName,onDelete:e.deleteBag,onCancel:e.closeEditBagPopUp}}):e._e(),e.getCardPopupData.show?o("card-pop-up",{attrs:{data:e.getCardPopupData},on:{onSave:e.editCardName,onCancel:e.closeEditCardPopUp,onDelete:e.deleteCard}}):e._e()],1):e._e()])},Ne=[],Ae=(t("4de4"),t("c975"),t("07ac"),t("3f7d")),De=t("2909"),xe=function(e,a){var t=a.removedIndex,o=a.addedIndex,r=a.payload;if(null===t&&null===o)return e;var n=Object(De["a"])(e),i=r;return null!==t&&(i=n.splice(t,1)[0]),null!==o&&n.splice(o,0,i),n},Me=function(){function e(){Object(u["a"])(this,e)}return Object(g["a"])(e,[{key:"fetchBags",value:function(e,a,t){var o=T.BAG+"/board-id/"+e;D.a.create({}),R.get(o,D.a,a,t)}},{key:"createBag",value:function(e,a,t){var o=T.BAG,r={name:e.name,position:e.position,boardId:e.boardId};D.a.create({}),R.post(o,r,D.a,a,t)}},{key:"deleteBag",value:function(e,a,t){var o=T.BAG+"/"+e;D.a.create({}),R.delete(o,D.a,a,t)}},{key:"editBag",value:function(e,a,t){var o=T.BAG;e.bagId,e.name;D.a.create({}),R.put(o,e,D.a,a,t)}},{key:"moveBag",value:function(e,a,t,o){var r=T.BAG+"/"+e+"/"+a,n={};D.a.create({}),R.put(r,n,D.a,t,o)}},{key:"fetchCards",value:function(e,a,t){var o=T.CARD+"/bag-id/"+e;D.a.create({}),R.get(o,D.a,a,t)}},{key:"createCard",value:function(e,a,t){var o=T.CARD,r={bagId:e.bagId,name:e.name,position:e.position};D.a.create({}),R.post(o,r,D.a,a,t)}},{key:"deleteCard",value:function(e,a,t){var o=T.CARD+"/"+e;D.a.create({}),R.delete(o,D.a,a,t)}},{key:"editCard",value:function(e,a,t){var o=T.CARD;e.cardId,e.name;D.a.create({}),R.put(o,e,D.a,a,t)}},{key:"moveCard",value:function(e,a,t){var o=T.CARD+"/move",r={cardId:e.cardId,toBagId:e.toBagId,position:e.newPosition};D.a.create({}),R.put(o,r,D.a,a,t)}},{key:"fetchAllMember",value:function(e,a,t){var o=T.BOARD+"/"+e+"/members";D.a.create({}),R.get(o,D.a,a,t)}},{key:"addMemberById",value:function(e,a,t,o){var r=T.BOARD+"/"+e+"/member-id/"+a;D.a.create({}),R.post(r,{},D.a,t,o)}},{key:"addMemberByEmail",value:function(e,a,t,o){var r=T.BOARD+"/"+e+"/member-email/"+a;console.log("Board.js -> addMemberByEmail. url "+r),D.a.create({}),R.post(r,{},D.a,t,o)}},{key:"removeMember",value:function(e,a,t,o){var r=T.BOARD+"/"+e+"/member-id/"+a;console.log("Board.js -> removeMember. url "+r),D.a.create({}),R.delete(r,D.a,t,o)}},{key:"deleteBoard",value:function(e,a,t){var o=T.BOARD+"/"+e;console.log("Board.js -> deleteBoard. url "+o),D.a.create({}),R.delete(o,D.a,a,t)}},{key:"updateBoard",value:function(e,a,t,o){var r=T.BOARD+"/"+e;console.log("Board.js -> deleteBoard. url "+r);var n={boardName:a};D.a.create({}),R.post(r,n,D.a,t,o)}}]),e}(),Ue=new Me,He=Ue,Je=function(){function e(a){Object(u["a"])(this,e),this.page=a}return Object(g["a"])(e,[{key:"fetchBagsOnSuccess",value:function(e){console.log("Bags -> fetchAllBags: "+JSON.stringify(e));var a=this.page,t=e.status;if(t==L.OK){a.board.bags=[],this.page.boardName=e.data.boardName;var o=e.data.bags,r=o.map((function(e){var t={id:e.bagId,name:e.name,position:e.position,cards:[]};return a.bagById[t.id]=t,t}));a.board.bags=r,console.log("Bags -> fetchAllBags. Message: "+JSON.stringify(a.board.bags)),a.loadingItem+=a.board.bags.length,a.loading+=1,a.fetchAllCards()}else $.redirect(a,i.NOT_FOUND)}},{key:"createBagOnSuccess",value:function(e){}},{key:"createBagOnError",value:function(e){console.log("Bags -> createBag. error "+JSON.stringify(e))}},{key:"fetchBagsOnFail",value:function(e){console.log("Bags -> fetchAllBags. error "+JSON.stringify(e)),$.redirect(this.page,i.NOT_FOUND)}},{key:"fetchCardOnSuccess",value:function(e){var a=this;console.log("Cards -> fetchCardOnSuccess: "+JSON.stringify(e));var t=this.page,o=e.status;if(o==L.OK){t.loading+=1;var r=e.data;if(0==r.length)return;var n=r.map((function(e){var t={id:e.id,name:e.name,position:e.position,bagId:e.bagId};return a.page.cardById[t.id]=t,t}));n.sort((function(e,a){return e.position-a.position})),t.board.bags.forEach((function(e){if(e.id==r[0].bagId)return e.cards=n,void console.log("Cards -> fetchCardOnSuccess: data board "+JSON.stringify(t.board.bags))}))}}},{key:"fetchCardOnError",value:function(e){}},{key:"createCardOnSuccess",value:function(e){console.log("Cards -> createCardOnSuccess: "+JSON.stringify(e))}},{key:"createCardOnError",value:function(e){console.log("Cards -> createCardOnError: "+JSON.stringify(e))}}]),e}(),Re=Je,Te=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"quick-bag-editor",on:{click:e.onClickCancel}},[t("div",{staticClass:"quick-bag-editor-bag",style:e.position,on:{click:function(e){e.stopPropagation()}}},[t("b-form-textarea",{staticClass:"text-area-bag",attrs:{rows:"3","max-rows":"6",placeholder:"name"},model:{value:e.data.value,callback:function(a){e.$set(e.data,"value",a)},expression:"data.value"}}),t("b-button",{staticClass:"btn-submit-edit-bag btn-save",on:{click:e.onClickSave}},[e._v("Save")]),t("b-button",{staticClass:"btn-submit-edit-bag btn-delete",on:{click:e.onClickDelete}},[e._v("Delete")])],1)])},je=[],Pe=(t("a9e3"),{name:"BagPopUp",props:{data:{value:{type:String,default:""},bagId:{type:Number,default:-1},index:{type:Number,default:-1},rect:null}},computed:{position:function(){var e={left:(null!=this.data.rect?this.data.rect.left:0)+"px",top:(null!=this.data.rect?this.data.rect.top:0)+"px"};return e}},data:function(){return{SAVE:"onSave",CANCEL:"onCancel",DELETE:"onDelete"}},methods:{onClickSave:function(){var e=this;console.log(e.data.rect),console.log("BagPopUp -> onClickSave: "+e.data.bagId+" | "+e.data.value),this.$emit(e.SAVE,e.data.bagId,e.data.value)},onClickCancel:function(){var e=this;this.$emit(e.CANCEL)},onClickDelete:function(){var e=this;this.$emit(e.DELETE,e.data.bagId,e.data.index)}}}),We=Pe,Le=(t("7039"),Object(y["a"])(We,Te,je,!1,null,"fba3d392",null)),$e=Le.exports,Ge=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"quick-card-editor",on:{click:e.onClickCancel}},[t("div",{staticClass:"quick-card-editor-card",style:e.position,on:{click:function(e){e.stopPropagation()}}},[t("b-form-textarea",{staticClass:"text-area-card",attrs:{rows:"3","max-rows":"6",placeholder:"name"},model:{value:e.data.value,callback:function(a){e.$set(e.data,"value",a)},expression:"data.value"}}),t("b-button",{staticClass:"btn-submit-edit-card btn-save",on:{click:e.onClickSave}},[e._v("Save")]),t("b-button",{staticClass:"btn-submit-edit-card btn-delete",on:{click:e.onClickDelete}},[e._v("Delete")])],1)])},Fe=[],qe={name:"CardPopUp",props:{data:{value:{type:String,default:""},cardId:{type:Number,default:-1},cardIndex:{type:Number,default:-1},bagIndex:{type:Number,default:-1},rect:null}},computed:{position:function(){var e={left:(null!=this.data.rect?this.data.rect.left:0)+"px",top:(null!=this.data.rect?this.data.rect.top:0)+"px"};return e}},data:function(){return{SAVE:"onSave",CANCEL:"onCancel",DELETE:"onDelete"}},methods:{onClickSave:function(){var e=this;console.log(e.data.rect),console.log("CardPopUp -> onClickSave: "+e.data.cardId+" | "+e.data.value),this.$emit(e.SAVE,e.data.cardId,e.data.value)},onClickCancel:function(){var e=this;this.$emit(e.CANCEL)},onClickDelete:function(){var e=this;this.$emit(e.DELETE,e.data.cardId,e.data.bagIndex,e.data.cardIndex),this.onClickCancel()}}},ze=qe,Ve=(t("760a"),Object(y["a"])(ze,Ge,Fe,!1,null,"21647dea",null)),Ke=Ve.exports,Qe=function(){function e(a){Object(u["a"])(this,e),this.page=a,this.buildHandler()}return Object(g["a"])(e,[{key:"buildHandler",value:function(){this.handlers={},this.handlers[te.ADD_MEMBER]=this.receiveMessageAddMember.bind(this),this.handlers[te.LEAVE_BOARD]=this.receiveMessageLeaveBoard.bind(this),this.handlers[te.UPDATE_BOARD]=this.receiveMessageUpdateBoard.bind(this),this.handlers[te.DELETE_BOARD]=this.receiveMessageDeleteBoard.bind(this),this.handlers[te.CREATE_BAG]=this.receiveMessageCreateBag.bind(this),this.handlers[te.MOVE_BAG]=this.receiveMessageMoveBag.bind(this),this.handlers[te.DELETE_BAG]=this.receiveMessageDeleteBag.bind(this),this.handlers[te.EDIT_BAG]=this.receiveMessageEditBag.bind(this),this.handlers[te.CREATE_CARD]=this.receiveMessageCreateCard.bind(this),this.handlers[te.MOVE_CARD]=this.receiveMessageMoveCard.bind(this),this.handlers[te.DELETE_CARD]=this.receiveMessageDeleteCard.bind(this),this.handlers[te.EDIT_CARD]=this.receiveMessageEditCard.bind(this)}},{key:"onmessage",value:function(e){console.log("BoardWebsocketHandler -> onMessage ".concat(e.data));var a=JSON.parse(e.data);a.boardId==this.page.boardId&&this.handlers[a.action](a.message)}},{key:"onclose",value:function(e){this.page.loading=0}},{key:"onerror",value:function(e){}},{key:"receiveMessageAddMember",value:function(e){console.log("BoardWSHandler -> receiveMessageCreateBag "+JSON.stringify(e));var a=e;this.page.members.push(a)}},{key:"receiveMessageLeaveBoard",value:function(e){console.log("BoardWSHandler -> receiveMessageLeaveBoard "+JSON.stringify(e));var a=e;if(this.page.currentUser.id!=a){for(var t=this.page.members,o=0;o<t.length;o++)if(t[o].id==a){t.splice(o,1);break}}else $.redirectToHomeFrom(this.page)}},{key:"receiveMessageUpdateBoard",value:function(e){console.log("BoardWSHandler -> receiveMessageUpdateBoard "+JSON.stringify(e)),this.page.boardName=e,this.page.newName=""}},{key:"receiveMessageDeleteBoard",value:function(e){console.log("BoardWSHandler -> receiveMessageDeleteBoard "+JSON.stringify(e)),$.redirectToHomeFrom(this.page)}},{key:"receiveMessageCreateBag",value:function(e){console.log("BoardWSHandler -> receiveMessageCreateBag "+JSON.stringify(e));var a=Object.values(e)[0],t=(this.page,{id:a.id,name:a.name,position:a.position,cards:[]});this.page.board.bags.push(t),this.page.bagById[t.id]=t,this.page.board.bags.sort((function(e,a){return e.position-a.position}))}},{key:"receiveMessageMoveBag",value:function(e){console.log("BoardWSHandler -> receiveMessageMoveBag "+JSON.stringify(e));var a=Object.values(e),t=this.page;a.forEach((function(e){var a=t.bagById[e.id];a.position=e.position})),t.board.bags.sort((function(e,a){return e.position-a.position}))}},{key:"receiveMessageDeleteBag",value:function(e){console.log("BoardWSHandler -> receiveMessageDeleteBag "+JSON.stringify(e));var a=e,t=this.page.bagById[a],o=this.page.board.bags,r=t.cards,n=this.page;r.forEach((function(e){delete n.cardById[e.id]})),delete n.bagById[a];var i=0;for(i;i<o.length;i++)if(o[i].id==a)break;o.splice(i,1)}},{key:"receiveMessageEditBag",value:function(e){console.log("BoardWSHandler -> receiveMessageEditBag "+JSON.stringify(e)),this.page.bagById[e.bagId].name=e.name}},{key:"receiveMessageCreateCard",value:function(e){var a=this;console.log("BoardWSHandler -> receiveMessageCreateCard "+JSON.stringify(e));var t=Object.values(e)[0];this.page.cardById[t.id]=t,this.page.board.bags.forEach((function(e){if(e.id==t.bagId)return e.cards.push(t),e.cards.sort((function(e,a){return e.position-a.position})),void console.log("BoardWSHandler -> receiveMessageCreateCard: "+JSON.stringify(a.page.board.bags))}))}},{key:"receiveMessageMoveCard",value:function(e){console.log("BoardWSHandler -> receiveMessageMoveCard "+JSON.stringify(e));for(var a=e.reqCardId,t=(e.modifiedCards[a],Object.values(e.modifiedCards)),o=this.page.cardById[a],r=this.page.bagById[o.bagId],n=r.cards,i=0;i<n.length;i++)if(n[i].id==a){n.splice(i,1);break}for(var s=this.page.bagById[e.toBagId],d=s.cards,c=0;c<d.length;c++)if(d[c].id==a){d.splice(c,1);break}o.bagId=e.toBagId,d.push(o);var l=this;t.forEach((function(e){l.page.cardById[e.id].position=e.position})),d.sort((function(e,a){return e.position-a.position})),console.log("debug0 "+JSON.stringify(s)+"\n"+JSON.stringify(r)),console.log("debug1 "+JSON.stringify(d)+"\n"+JSON.stringify(n))}},{key:"receiveMessageDeleteCard",value:function(e){console.log("BoardWSHandler -> receiveMessageDeleteCard "+JSON.stringify(e));var a=e.bagId,t=e.cardId,o=0,r=this.page.board.bags;for(o;o<r.length;o++)if(r[o].id=a)break;for(var n=r[o],i=0;i<n.cards.length;i++)if(n.cards[i].id==t){n.cards.splice(i,1);break}delete self.cardById[t]}},{key:"receiveMessageEditCard",value:function(e){console.log("BoardWSHandler -> receiveMessageEditCard "+JSON.stringify(e)),this.page.cardById[e.cardId].name=e.name}}]),e}(),Ye=Qe,Xe=401,Ze=400,ea=451,aa=function(){function e(a){Object(u["a"])(this,e),this.page=a,this.buildHandler()}return Object(g["a"])(e,[{key:"buildHandler",value:function(){this.handlers={},this.handlers[Xe]=this.onReceiveUnauthorized.bind(this),this.handlers[Ze]=this.onReceiveBagQuest.bind(this),this.handlers[ea]=this.onReceiveReloadPage.bind(this)}},{key:"onError",value:function(e,a){var t=e.response.data;console.log("BoardErrorHandler "+JSON.stringify(e));var o=t.status;this.handlers[o]&&this.handlers[o](t),!this.handlers[o]&&this.onReceiveCommonError(t),a&&a(e)}},{key:"onReceiveUnauthorized",value:function(e){console.log("BoardErrorHandler -> onReceiveUnauthorized "+JSON.stringify(e)),this.onCreateNotification("Unauthorized",e,"danger"),V.signOut(this.page)}},{key:"onReceiveBagQuest",value:function(e){console.log("BoardErrorHandler -> onReceiveBagQuest "+JSON.stringify(e)),this.onCreateNotification("Bag request",e,"warning")}},{key:"onReceiveReloadPage",value:function(e){console.log("BoardErrorHandler -> onReceiveReloadPage "+JSON.stringify(e)),$.reload(this.page)}},{key:"onReceiveCommonError",value:function(e){console.log("BoardErrorHandler -> onReceiveCommonError "+JSON.stringify(e)),this.onCreateNotification("Error",e)}},{key:"onCreateNotification",value:function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"danger",o=this.page.$createElement,r=o("div",[o("b-spinner",{props:{type:"grow",small:!0}}),"[PATH]: "+a.path,o("br"),o("br"),o("b-spinner",{props:{type:"grow",small:!0}}),"[MESSAGE]: "+a.message]);this.page.$bvToast.toast([r],{variant:t,title:e+": "+a.status,autoHideDelay:5e3,appendToast:!1})}}]),e}(),ta=aa,oa=["azure","beige","bisque","blanchedalmond","burlywood","cornsilk","gainsboro","ghostwhite","ivory","khaki"],ra={bags:[]},na={name:"Board.vue",components:{Container:Ae["Container"],Draggable:Ae["Draggable"],BagPopUp:$e,CardPopUp:Ke,CreatorPopUp:ee},beforeMount:function(){this.fetchAllBags(),this.fetchAllMembers()},mounted:function(){this.connectWebsocket()},beforeDestroy:function(){this.boardWS.close()},data:function(){var e=this;return{boardId:e.$route.params.boardId,boardName:"",newName:"",board:ra,bagById:{},cardById:{},cardColors:oa,upperDropPlaceholderOptions:{className:"cards-drop-preview",animationDuration:"150",showOnTop:!0},dropPlaceholderOptions:{className:"drop-preview",animationDuration:"150",showOnTop:!0},newBag:{position:0,name:"default name",boardId:e.$route.params.boardId},boardNetwork:new Re(e),boardWS:new ie(U.WS_URL,this),WSHandler:new Ye(this),BoardErrorHandler:new ta(this),addedEmail:"",showAddMemberInput:!1,loading:0,loadingItem:2,widget:{sidebar_btn:{variant:"outline-secondary",delete_board_icon:"x-circle"},members_btn:{icon:"people-fill"},add_member_btn:{icon:"person-plus-fill"}},popUpBag:{show:!1,value:null,bagId:-1,index:-1,rect:null},popUpCard:{show:!1,value:null,cardId:-1,cardIndex:-1,bagIndex:-1,rect:null},currentUser:null,members:[]}},computed:{getBagPopupData:function(){this.log("Board -> getBagPopupData "+JSON.stringify(this.popUpBag));var e=this;return{show:e.popUpBag.show,value:e.popUpBag.value,bagId:e.popUpBag.bagId,index:e.popUpBag.index,rect:e.popUpBag.rect}},getCardPopupData:function(){this.log("Board -> getCardPopupData "+JSON.stringify(this.popUpCard));var e=this;return{show:e.popUpCard.show,value:e.popUpCard.value,cardId:e.popUpCard.cardId,cardIndex:e.popUpCard.cardIndex,bagIndex:e.popUpCard.bagIndex,rect:e.popUpCard.rect}}},methods:{connectWebsocket:function(){var e=v.getJwt();this.boardWS.setJwt(e),this.boardWS.connect()},fetchAllMembers:function(){var e=this.$route.params.boardId,a=this;He.fetchAllMember(e,(function(t){console.log("Board -> fetchAllMembers "+e+" | "+JSON.stringify(t));var o=t.data,r=o.members,n=r[o.reqId];a.currentUser=n,a.members=Object.values(o.members),console.log("Board -> fetchAllMembers "+JSON.stringify(a.members))}),a.BoardErrorHandler.onError.bind(a.BoardErrorHandler))},addMemberByEmail:function(){this.ensureOpenedWS();var e=this.$route.params.boardId,a=this;a.showAddMemberInput=!a.showAddMemberInput,He.addMemberByEmail(e,a.addedEmail,(function(e){console.log("Board -> addMemberByEmail "+JSON.stringify(e))}),a.BoardErrorHandler.onError.bind(a.BoardErrorHandler)),a.addedEmail=""},removeMember:function(e){this.ensureOpenedWS();var a=this;He.removeMember(a.boardId,e,(function(e){console.log("Board -> removeMember "+JSON.stringify(e))}),a.BoardErrorHandler.onError.bind(a.BoardErrorHandler))},fetchAllBags:function(){var e=this,a=this.$route.params.boardId;He.fetchBags(a,e.boardNetwork.fetchBagsOnSuccess.bind(e.boardNetwork),(function(a){return e.BoardErrorHandler.onError(a,e.boardNetwork.fetchBagsOnFail.bind(e.boardNetwork))}))},createBag:function(e){this.ensureOpenedWS();var a=this;this.newBag.position=this.board.bags&&this.board.bags.length>0?this.board.bags[this.board.bags.length-1].position+65536:0,this.newBag.name=e,console.log("Bags -> createBag: request - "+JSON.stringify(this.newBag)),He.createBag(this.newBag,a.boardNetwork.createBagOnSuccess.bind(a.boardNetwork),a.BoardErrorHandler.onError.bind(a.BoardErrorHandler))},showEditBagPopUp:function(e,a,t){console.log("showEditBagPopUp bag "+e),this.popUpBag.rect=this.getBagRect(e),this.popUpBag.bagId=e,this.popUpBag.value=t,this.popUpBag.index=a,this.popUpBag.show=!0},closeEditBagPopUp:function(e){console.log("closeEditBagPopUp bag "+e),this.popUpBag.show=!1},editBagName:function(e,a){this.ensureOpenedWS(),console.log("edit bagName "+e+" - "+a);var t=this,o={bagId:e,name:a};He.editBag(o,(function(e){t.log("Board -> editBagName success ",JSON.stringify(e)),t.popUpBag.show=!1}),t.BoardErrorHandler.onError.bind(t.BoardErrorHandler))},getBagRect:function(e){var a=this.bagTagId(e),t=this.$refs[a],o=t[0].$el.getBoundingClientRect();return this.log(a,t,o),o},deleteBag:function(e,a){this.ensureOpenedWS(),console.log("delete bag "+e+" at "+a),this.popUpBag.show=!1;var t=this;He.deleteBag(e,(function(t){console.log("[SUCCESS] delete bag "+e+" at "+a)}),t.BoardErrorHandler.onError.bind(t.BoardErrorHandler))},moveBag:function(e,a){this.ensureOpenedWS(),this.log("Board -> moveBag",e,a);var t=this;He.moveBag(e,a,(function(o){t.log("Board -> moveBag success",e,a,JSON.stringify(o))}),t.BoardErrorHandler.onError.bind(t.BoardErrorHandler))},fetchAllCards:function(){var e=this;this.board.bags.forEach((function(a){e.fetchCards(a.id)}))},fetchCards:function(e){var a=this;He.fetchCards(e,a.boardNetwork.fetchCardOnSuccess.bind(a.boardNetwork),a.boardNetwork.fetchCardOnError.bind(a.boardNetwork))},createCard:function(e,a){this.ensureOpenedWS(),this.log("board -> createCard",e,a);var t=this.bagById[a].cards,o=0==t.length?65536:t[t.length-1].position+65536,r={name:e,position:o,bagId:a},n=this;He.createCard(r,n.boardNetwork.createCardOnSuccess.bind(n.boardNetwork),n.BoardErrorHandler.onError.bind(n.BoardErrorHandler))},editCardName:function(e,a){this.ensureOpenedWS(),this.log("edit card ",e,a);var t=this,o={cardId:e,name:a};He.editCard(o,(function(e){t.log("Board -> editBagName success ",JSON.stringify(e)),t.popUpCard.show=!1}),t.BoardErrorHandler.onError.bind(t.BoardErrorHandler))},showEditCardPopUp:function(e,a,t,o){this.log("showEditCardPopUp card ",e,a,t,o),this.popUpCard.rect=this.getCardRect(e),this.popUpCard.cardId=e,this.popUpCard.value=o,this.popUpCard.cardIndex=a,this.popUpCard.bagIndex=t,this.popUpCard.show=!0},closeEditCardPopUp:function(e){console.log("closeEditCardPopUp card "+e),this.popUpCard.show=!1},deleteCard:function(e,a,t){this.ensureOpenedWS(),console.log("delete bag "+e+" at "+t);var o=this;He.deleteCard(e,(function(a){console.log("[SUCCESS] delete card "+e+" at "+t)}),o.BoardErrorHandler.onError.bind(o.BoardErrorHandler))},getCardRect:function(e){var a=this.cardTagId(e),t=this.$refs[a],o=t[0].$el.getBoundingClientRect();return this.log(a,t,o),o},moveCard:function(e,a,t){this.ensureOpenedWS(),this.log("Board -> moveCard",e,a,t);var o=this,r={cardId:e,toBagId:a,newPosition:t};He.moveCard(r,(function(e){console.log("moveCard success "+JSON.stringify(e))}),o.BoardErrorHandler.onError.bind(o.BoardErrorHandler))},makeColor:function(e){var a=this;return{backgroundColor:a.cardColors[e%a.cardColors.length]}},bagTagId:function(e){return"bag-"+e},cardTagId:function(e){return"card-"+e},refTagId:function(e,a){return e+"-"+a},onColumnDrop:function(e){console.log("onColumnDrop "+JSON.stringify(e));var a=Object.assign({},this.board);a.bags=xe(a.bags,e),this.board=a;var t=e.addedIndex,o=this.board.bags[t];if(1!=o.length){var r=this.getReqBagPosition(t);o.position=r,this.moveBag(o.id,r)}},getReqBagPosition:function(e){var a=this.board.bags[e],t=this.board.bags.length;if(t<=1)return a.position;var o=a.position,r=o;return r=0==e?(0+this.board.bags[1].position)/2:e==t-1?this.board.bags[t-2].position+65536:(this.board.bags[e-1].position+this.board.bags[e+1].position)/2,r},onCardDrop:function(e,a){if(null!==a.removedIndex||null!==a.addedIndex){this.log(" onCardDrop ",JSON.stringify(a),e);var t=Object.assign({},this.board),o=t.bags.filter((function(a){return a.id===e}))[0],r=t.bags.indexOf(o),n=Object.assign({},o);n.cards=xe(n.cards,a),t.bags.splice(r,1,n),this.board=t,this.bagById[n.id]=n}if(null!=a.addedIndex){var i=this.getReqCardPosition(a,e),s=a.payload.id,d=e;this.moveCard(s,d,i)}},getReqCardPosition:function(e,a){var t,o=e.addedIndex,r=a,n=this.bagById[r],i=n.cards[o];return t=1==n.cards.length?65536:0==o?(0+n.cards[1].position)/2:o==n.cards.length-1?n.cards[o-1].position+65536:(n.cards[o-1].position+n.cards[o+1].position)/2,i.position=t,t},getCardPayload:function(e){var a=this;return function(t){return a.board.bags.filter((function(a){return a.id===e}))[0].cards[t]}},dragStart:function(){console.log("drag started")},log:function(){var e;(e=console).log.apply(e,arguments)},deleteBoard:function(){this.ensureOpenedWS(),this.log("Board -> deleteBoard: ",this.boardId);var e=this;He.deleteBoard(this.boardId,(function(e){}),e.BoardErrorHandler.onError.bind(e.BoardErrorHandler))},updateBoard:function(){this.ensureOpenedWS(),this.log("Board -> updateBoard: ",this.boardId,this.newName);var e=this;He.updateBoard(this.boardId,this.newName,(function(e){}),e.BoardErrorHandler.onError.bind(e.BoardErrorHandler))},onopen:function(e){this.loading+=1},onmessage:function(e){this.WSHandler.onmessage(e)},onclose:function(e){this.WSHandler.onclose(e)},onerror:function(e){this.WSHandler.onerror(e)},ondie:function(e){this.WSHandler.onclose(e)},ensureOpenedWS:function(){"OPEN"!=this.boardWS.getState()&&$.reload(this)}}},ia=na,sa=(t("c3de"),Object(y["a"])(ia,_e,Ne,!1,null,"13434c6b",null)),da=sa.exports,ca=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[e._v(" 404 NOT FOUND!!! ")])},la=[],ua={name:"NotFound"},ga=ua,pa=Object(y["a"])(ga,ca,la,!1,null,"79b036ba",null),ha=pa.exports;o["default"].use(I["a"]);var ba=[{path:i.HOME,name:"Home",component:le,meta:{requiresAuth:!0}},{path:i.BOARD+"/:boardId",name:"Board",component:da,meta:{requiresAuth:!0}},{path:i.ABOUT,name:"About",component:Ie,meta:{requiresAuth:!1}},{path:i.SIGN_IN,name:"Sign In",component:Ce},{path:i.NOT_FOUND,name:"404",component:ha}],fa=new I["a"]({mode:"history",base:"/",routes:ba});fa.beforeEach((function(e,a,t){var o=v.getJwt(),r=e.matched.some((function(e){return e.meta.requiresAuth}));r&&!o?t(i.SIGN_IN):o&&e.path==i.SIGN_IN?t(i.HOME):t()}));var va=fa,ma=t("5f5b"),Ba=t("b1e0"),ya=(t("f9e3"),t("2dd8"),t("8aa5")),Ca=t.n(ya),Sa={apiKey:"AIzaSyBeOCkcCmv08qxXdlB-Eh4Q83o02va09g8",authDomain:"todo-task-garcol.firebaseapp.com",databaseURL:"https://todo-task-garcol.firebaseio.com",projectId:"todo-task-garcol",storageBucket:"todo-task-garcol.appspot.com",messagingSenderId:"604554181900",appId:"1:604554181900:web:151f8610575d0979ae1d29",measurementId:"G-04E1Z8W5P6"},Ea=Sa;o["default"].config.productionTip=!1,o["default"].use(ma["a"]),o["default"].use(Ba["a"]);var ka=null;Ca.a.initializeApp(Ea),Ca.a.auth().onAuthStateChanged((function(e){ka||(ka=new o["default"]({el:"#app",router:va,render:function(e){return e(w)}}))}))},"5b85":function(e,a,t){},7039:function(e,a,t){"use strict";var o=t("0f77"),r=t.n(o);r.a},"760a":function(e,a,t){"use strict";var o=t("5b85"),r=t.n(o);r.a},"7a61":function(e,a,t){e.exports=t.p+"img/github-small-icon-timpng.30b5f154.png"},"84f7":function(e,a,t){e.exports=t.p+"img/1.90a4aff2.jpg"},"85ec":function(e,a,t){},"8c54":function(e,a,t){e.exports=t.p+"img/google-icon.02d31de0.svg"},"9d13":function(e,a,t){e.exports=t.p+"img/3.8b558f66.jpg"},"9f00":function(e,a,t){e.exports=t.p+"img/2.793048ee.jpg"},b411:function(e,a,t){},c1fb:function(e,a,t){e.exports=t.p+"img/12.4e93e5ee.jpg"},c3de:function(e,a,t){"use strict";var o=t("b411"),r=t.n(o);r.a},c5af:function(e,a,t){e.exports=t.p+"img/6.efa7e8bb.jpg"},dca8:function(e,a,t){var o={"./1.jpg":"84f7","./10.jpg":"fc46","./11.jpg":"36dd","./12.jpg":"c1fb","./2.jpg":"9f00","./3.jpg":"9d13","./4.jpg":"e175","./5.jpg":"522a","./6.jpg":"c5af","./7.jpg":"e7df","./8.jpg":"1fef","./9.jpg":"17e8"};function r(e){var a=n(e);return t(a)}function n(e){if(!t.o(o,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=n,e.exports=r,r.id="dca8"},e175:function(e,a,t){e.exports=t.p+"img/4.3094b3be.jpg"},e7df:function(e,a,t){e.exports=t.p+"img/7.3e6b4856.jpg"},e9ca:function(e,a,t){e.exports=t.p+"img/facebook-icon.700dba70.svg"},e9e0:function(e,a,t){},eb4d:function(e,a,t){},fc46:function(e,a,t){e.exports=t.p+"img/10.d26627c6.jpg"},fd4a:function(e,a,t){}});
//# sourceMappingURL=app.65029d6e.js.map